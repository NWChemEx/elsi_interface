IF(USE_MPI AND USE_SCALAPACK)
    IF(CMAKE_CXX_COMPILER_ID STREQUAL "Clang" OR "x${CMAKE_CXX_COMPILER_ID}" STREQUAL "xIntelLLVM")
        MESSAGE(STATUS "Enabling internal ELPA-2023.05.001-LLVM")
        MESSAGE(STATUS "WARNING: Internal ELPA may not be as efficient and updated as the external build!")
        ADD_SUBDIRECTORY(LLVM)
    ELSE()
        MESSAGE(STATUS "Enabling internal ELPA-2023.05.001")
        MESSAGE(STATUS "WARNING: Internal ELPA may not be as efficient and updated as the external build!")
        ADD_SUBDIRECTORY(mpi)
    ENDIF()
ELSE()
    MESSAGE(STATUS "Enabling internal ELPA-2023.05.001 (no MPI)")
    MESSAGE(STATUS "WARNING: Internal ELPA may not be as efficient and updated as the external build!")
    ADD_SUBDIRECTORY(nompi)
ENDIF()